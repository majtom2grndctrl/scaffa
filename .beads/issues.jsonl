{"id":"scaffa-39v","title":"Docs: Fill missing architecture contracts","description":"## Goal\nUnblock detailed implementation ticket-writing by documenting the missing architectural contracts referenced in `docs/index.md`.\n\n## Scope\n- Runtime adapter contract (framework-agnostic)\n- Component registry schema\n- Inspector UX rules/semantics\n- Preview session protocol (app/component/variant)\n- Iteration Deck integration sketch (conceptual)\n- Project Graph schema + patch/update protocol\n- v0 in-scope deliverables + first user journey\n- Override model + persistence/serialization\n- IPC/sequence diagrams for key flows\n\n## Success Criteria\n- Each scope item is documented (new page or `docs/index.md` section) and linked from `docs/index.md`.\n- Contracts are specific enough to write implementation tickets without inventing semantics during coding.\n- Definitions stay framework-agnostic; React can be used as the first concrete example where needed.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-10T11:34:15.923451-08:00","created_by":"dhiester","updated_at":"2026-01-10T14:59:39.110575-08:00","closed_at":"2026-01-10T14:59:39.110575-08:00","close_reason":"All child doc tickets completed","labels":["architecture","docs"]}
{"id":"scaffa-39v.1","title":"Docs: Runtime adapter contract","description":"## Context\n`docs/index.md` calls out runtime adapters (instance identification, click-to-select, applying prop overrides) but doesn't define the required contract or boundaries.\n\n## Work\n- Define a framework-agnostic runtime adapter contract: required capabilities, responsibilities, and data shapes.\n- Clarify boundaries vs component registries and the extension host.\n- Include a React-first example mapping (as an example, not as the contract).\n\n## Acceptance Criteria\n- Documents required adapter responsibilities: instance registration/identity, selection signaling, applying/removing overrides, and lifecycle/teardown.\n- Defines the minimal data shapes (stable IDs, type IDs, prop addressing) used across the boundary.\n- Specifies where the contract lives (new doc page or section) and links it from `docs/index.md`.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:35:01.564397-08:00","created_by":"dhiester","updated_at":"2026-01-10T14:59:22.974362-08:00","closed_at":"2026-01-10T14:59:22.974362-08:00","close_reason":"Docs written and linked from docs/index.md","labels":["architecture","docs"],"dependencies":[{"issue_id":"scaffa-39v.1","depends_on_id":"scaffa-39v","type":"parent-child","created_at":"2026-01-10T11:35:01.5669-08:00","created_by":"dhiester"}]}
{"id":"scaffa-39v.2","title":"Docs: Component registry schema","description":"## Context\n`docs/index.md` references registries and editable prop metadata, but the schema isn't formally defined. This blocks Inspector behavior and extension interoperability.\n\n## Work\n- Define a formal component registry schema (TypeScript types and/or Zod schema) for component metadata.\n- Cover prop editability (editable vs inspect-only), control types, defaults, constraints, labels, grouping, and stable type IDs.\n- Document how module registries compose and how project config overrides layer on top.\n\n## Acceptance Criteria\n- Provides a canonical schema for component registry entries, including prop metadata fields needed by the Inspector.\n- Includes examples for at least 2 component types and common control patterns (enum, boolean, string, slot/children, etc.).\n- Describes composition/override order (module -\u003e project overrides) and links the doc from `docs/index.md`.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:35:20.073174-08:00","created_by":"dhiester","updated_at":"2026-01-10T14:59:22.977091-08:00","closed_at":"2026-01-10T14:59:22.977091-08:00","close_reason":"Docs written and linked from docs/index.md","labels":["architecture","docs"],"dependencies":[{"issue_id":"scaffa-39v.2","depends_on_id":"scaffa-39v","type":"parent-child","created_at":"2026-01-10T11:35:20.075457-08:00","created_by":"dhiester"}]}
{"id":"scaffa-39v.3","title":"Docs: Inspector UX rules and semantics","description":"## Context\nScaffa's guiding principle depends on consistent Inspector semantics across core + extensions, but the UX rules aren't written down.\n\n## Work\n- Define the Inspector's visual language and semantics: editable vs non-editable, inspect-only, and opaque values.\n- Define how overrides are represented vs defaults (and how reset/clear works).\n- Define escalation paths (e.g. \"inspect source\" now; \"promote to code\" later) and extension consistency rules.\n\n## Acceptance Criteria\n- Documents the semantics and UI affordances for: editability state, override state, and source/escape-hatch actions.\n- Defines consistency constraints so extensions contribute inspector sections without inventing new meanings.\n- Links to related contracts (registry schema + overrides model) and is linked from `docs/index.md`.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:35:36.629482-08:00","created_by":"dhiester","updated_at":"2026-01-10T14:59:22.979303-08:00","closed_at":"2026-01-10T14:59:22.979303-08:00","close_reason":"Docs written and linked from docs/index.md","labels":["architecture","docs","ux"],"dependencies":[{"issue_id":"scaffa-39v.3","depends_on_id":"scaffa-39v","type":"parent-child","created_at":"2026-01-10T11:35:36.63282-08:00","created_by":"dhiester"}]}
{"id":"scaffa-39v.4","title":"Docs: Preview session protocol","description":"## Context\n`docs/index.md` establishes preview sessions as a foundational abstraction (app/component/future variant), but the protocol and lifecycle aren't precisely defined.\n\n## Work\n- Define preview session types and lifecycle (create/start/stop/dispose).\n- Define selection, override, and refresh flows for a session.\n- Clarify responsibilities across main/renderer/preload/extension host/runtime adapter.\n\n## Acceptance Criteria\n- Precisely defines session types (app, component, future variant) and required lifecycle events/state.\n- Defines selection + override flows (who emits, who stores, who applies, how refresh/reconnect behaves).\n- Document is linked from `docs/index.md` and references the runtime adapter + overrides model docs.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:35:53.027069-08:00","created_by":"dhiester","updated_at":"2026-01-10T14:59:22.982093-08:00","closed_at":"2026-01-10T14:59:22.982093-08:00","close_reason":"Docs written and linked from docs/index.md","labels":["architecture","docs"],"dependencies":[{"issue_id":"scaffa-39v.4","depends_on_id":"scaffa-39v","type":"parent-child","created_at":"2026-01-10T11:35:53.030647-08:00","created_by":"dhiester"}]}
{"id":"scaffa-39v.5","title":"Docs: Iteration Deck integration sketch (conceptual)","description":"## Context\nIteration Deck is explicitly deferred for v0, but the architecture needs an alignment sketch so v0 contracts don't block variants/snapshots later.\n\n## Work\n- Write a conceptual integration sketch for Iteration Deck: variants, snapshots, comparisons.\n- Show how it layers on top of instance editing, registries, and preview sessions.\n- Call out any required v0 constraints/invariants to preserve compatibility.\n\n## Acceptance Criteria\n- Provides a high-level conceptual model (no implementation) for variants/snapshots/comparisons.\n- Identifies which v0 contracts must be designed to support it (sessions, overrides, registries, graph).\n- Document is linked from `docs/index.md` (either in Deferred section or adjacent architecture sections).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:36:09.665714-08:00","created_by":"dhiester","updated_at":"2026-01-10T14:59:22.984607-08:00","closed_at":"2026-01-10T14:59:22.984607-08:00","close_reason":"Docs written and linked from docs/index.md","labels":["architecture","docs"],"dependencies":[{"issue_id":"scaffa-39v.5","depends_on_id":"scaffa-39v","type":"parent-child","created_at":"2026-01-10T11:36:09.668075-08:00","created_by":"dhiester"}]}
{"id":"scaffa-39v.6","title":"Docs: Define v0 in-scope deliverables + first user journey","description":"## Context\n`docs/index.md` has architectural pillars and an explicit out-of-scope list, but it doesn't clearly define what *is* in scope for v0 or the end-to-end user journey.\n\n## Work\n- Add a v0 scope section: what's in, what's out, and success definition.\n- Write the first critical user journey narrative (open workspace -\u003e start preview -\u003e select instance -\u003e edit props -\u003e see overrides -\u003e persist/share results).\n- Ensure it aligns with the existing pillars and Deferred list.\n\n## Acceptance Criteria\n- Documents v0 scope with clear deliverables (enough to drive ticket-writing).\n- Includes at least one end-to-end user journey that exercises preview, selection, inspector editing, and overrides.\n- Cross-references related contract docs and is linked from `docs/index.md`.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:36:26.942463-08:00","created_by":"dhiester","updated_at":"2026-01-10T14:59:22.986624-08:00","closed_at":"2026-01-10T14:59:22.986624-08:00","close_reason":"Docs written and linked from docs/index.md","labels":["architecture","docs","product"],"dependencies":[{"issue_id":"scaffa-39v.6","depends_on_id":"scaffa-39v","type":"parent-child","created_at":"2026-01-10T11:36:26.944568-08:00","created_by":"dhiester"}]}
{"id":"scaffa-39v.7","title":"Docs: Project Graph schema + patch/update protocol","description":"## Context\n`docs/index.md` names the Project Graph as canonical truth and `docs/scaffa_extension_api.md` references `GraphQuery`/`GraphPatch`, but the graph entity model and patch semantics aren't defined.\n\n## Work\n- Define the Project Graph entity schema: routes, component types, instances, and relationships.\n- Define ID strategy (stable type IDs, stable instance IDs where possible) and versioning.\n- Define patch/update protocol semantics (incremental updates, ordering, delivery guarantees) and example patches.\n\n## Acceptance Criteria\n- Documents the graph's core entities + relationships, including required fields for v0.\n- Defines patch semantics (what a patch can express, minimal guarantees, and example payloads).\n- Clarifies producer/consumer roles (adapters produce patches; extensions consume) and links from `docs/index.md`.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:36:43.014417-08:00","created_by":"dhiester","updated_at":"2026-01-10T14:59:22.988529-08:00","closed_at":"2026-01-10T14:59:22.988529-08:00","close_reason":"Docs written and linked from docs/index.md","labels":["architecture","docs"],"dependencies":[{"issue_id":"scaffa-39v.7","depends_on_id":"scaffa-39v","type":"parent-child","created_at":"2026-01-10T11:36:43.016655-08:00","created_by":"dhiester"}]}
{"id":"scaffa-39v.8","title":"Docs: Override model (non-destructive) + persistence/serialization","description":"## Context\n`docs/index.md` says edits are \"non-destructive overrides\" applied to preview sessions, but the data model, persistence strategy, and invariants aren't specified.\n\n## Work\n- Define the override data model: addressing (instance + prop path), values, and precedence (defaults vs overrides vs config).\n- Define lifecycle operations: set/update, reset/clear, bulk clear, and conflict behavior when instances change.\n- Define persistence/serialization strategy for v0 (ephemeral vs saved, file format/location if saved) and how overrides are diffable/transactional.\n\n## Acceptance Criteria\n- Documents the canonical override model and precedence rules.\n- Specifies persistence/serialization strategy and how overrides remain inspectable/reversible.\n- Linked from `docs/index.md` and referenced by Preview Session Protocol + Inspector UX docs.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:37:00.422374-08:00","created_by":"dhiester","updated_at":"2026-01-10T14:59:22.990482-08:00","closed_at":"2026-01-10T14:59:22.990482-08:00","close_reason":"Docs written and linked from docs/index.md","labels":["architecture","docs"],"dependencies":[{"issue_id":"scaffa-39v.8","depends_on_id":"scaffa-39v","type":"parent-child","created_at":"2026-01-10T11:37:00.424547-08:00","created_by":"dhiester"}]}
{"id":"scaffa-39v.9","title":"Docs: IPC boundaries + key sequence diagrams","description":"## Context\nThe multi-process model is defined at a high level in `docs/index.md`, but the concrete cross-process flows (preview start, selection, overrides, graph patches) aren't captured as diagrams.\n\n## Work\n- Add 2â€“4 sequence diagrams covering the critical flows:\n  - Start preview session (app/component)\n  - Selection (click-to-select) flowing to Inspector\n  - Apply override and see it reflected in preview\n  - Graph patch propagation to consumers\n- Clearly label process boundaries (main, preload, renderer, extension host, preview runtime) and responsibilities.\n\n## Acceptance Criteria\n- Contains sequence diagrams with named participants and explicit message directions across process boundaries.\n- Diagrams align with the Preview Session Protocol + Runtime Adapter + Project Graph docs.\n- Linked from `docs/index.md` (or embedded there if that's preferred).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:37:18.465341-08:00","created_by":"dhiester","updated_at":"2026-01-10T14:59:22.992257-08:00","closed_at":"2026-01-10T14:59:22.992257-08:00","close_reason":"Docs written and linked from docs/index.md","labels":["architecture","docs"],"dependencies":[{"issue_id":"scaffa-39v.9","depends_on_id":"scaffa-39v","type":"parent-child","created_at":"2026-01-10T11:37:18.467814-08:00","created_by":"dhiester"}]}
{"id":"scaffa-u2h","title":"Build fails: @tanstack/router-devtools RouterDevtools export mismatch","description":"## Context\n\nRunning the production build currently fails due to an invalid import from @tanstack/router-devtools.\n\n## Repro\n\n1. pnpm install --frozen-lockfile\n2. pnpm build\n\n## Error\n\nVite/Rollup reports:\n\n- \"RouterDevtools\" is not exported by \"@tanstack/router-devtools\" (imported in src/renderer/views/AppShell.tsx).\n\n## Notes\n\nLikely fixes:\n- Update import to the correct exported symbol for the installed version (e.g. TanStackRouterDevtools), OR\n- Gate devtools behind a dev-only conditional/dynamic import so production build excludes it.\n\n## Acceptance Criteria\n\n- pnpm build succeeds\n- Router devtools still function in dev mode\n","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-10T14:57:55.11218-08:00","created_by":"dhiester","updated_at":"2026-01-10T15:10:01.889629-08:00","closed_at":"2026-01-10T15:10:01.88965-08:00","labels":["bug","build"]}
